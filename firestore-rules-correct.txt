# Regras Corretas do Firestore para O Irmãozinho

## Regras para Permitir Leitura Pública de Conteúdo Publicado

```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Permitir leitura pública para conteúdo publicado
    match /content/{document} {
      allow read: if resource.data.status == "publicado";
      allow write: if request.auth != null;
    }
    
    // Bloquear tudo mais
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
```

## Regras Alternativas (se as acima não funcionarem)

### Opção 1: Mais Permissiva (apenas para teste)
```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}
```

### Opção 2: Com verificação de autenticação
```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /content/{document} {
      allow read: if resource.data.status == "publicado" || request.auth != null;
      allow write: if request.auth != null;
    }
  }
}
```

## Como Configurar:

1. Acesse: https://console.firebase.google.com/
2. Selecione o projeto: admoirmaozinho
3. Vá em: Firestore Database > Rules
4. **IMPORTANTE**: Delete todas as regras existentes
5. Cole uma das regras acima
6. Clique em "Publish"
7. Aguarde alguns segundos para propagação

## Verificação:

1. Teste com `test-public-access.html`
2. Se ainda der erro, tente a "Opção 1" (mais permissiva)
3. Depois que funcionar, volte para as regras mais restritivas

## Possíveis Problemas:

- **Regras antigas em cache**: Aguarde alguns minutos
- **Projeto em modo de produção**: Mude para modo de teste temporariamente
- **Regras mal formatadas**: Verifique se não há caracteres extras
